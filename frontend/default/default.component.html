<div ng-cloak>
  <md-content>
    <md-tabs md-dynamic-height md-border-bottom md-selected="selectedIndex">
      <md-tab label="Listagem">
        <md-content class="md-padding">
          <md-list class="md-dense" flex>
            <md-list-item layout="row">
                <h4 flex="{{column.width}}" ng-repeat="column in tctrl.columns">{{column.title}}</h4>
            </md-list-item>        

            <md-list-item layout="row" ng-repeat="row in fetch" ng-click="load(row.id)">
                <div class="md-list-item-text" flex="{{column.width}}" ng-repeat="column in tctrl.columns"><span ng-if="row[column.field][0].descrp">{{ row[column.field][0].descrp }}</span><span ng-if="!row[column.field][0].descrp">{{ row[column.field] }}</span></div>
            </md-list-item>
          </md-list>

        </md-content>
      </md-tab>
      <md-tab label="{{title}}" ng-if="editId == -1 ? title='Incluir': title='Editar'">
        <md-content class="md-padding">
            <form name="default" style="margin-top: 20px" ng-submit="submit()">
                <div layout="column" layout-gt-sm="row" layout-wrap layout-align-gt-sm="space-between start">
                
                    <md-input-container ng-repeat="row in tctrl.data" class="md-block" flex-gt-sm="{{row.width || 45}}">
                        <label>{{row.title}}</label>
                        <input type="text" ng-model="val[row.field]" ng-required="{{row.required}}">
                    </md-input-container>
                
                </div>
                <div align="right">
                    <md-button type="button" class="md-raised md-warn" ng-if="editId != -1" ng-click="delete(event, editId)">Apagar</md-button>
                    <md-button type="button" class="md-raised md-secondary" ng-if="editId != -1" ng-click="cancel(event)">Cancelar</md-button>
                    <md-button type="submit" class="md-raised md-primary">Enviar</md-button>
                </div>
            </form>
                
        </md-content>
      </md-tab>
    </md-tabs>
  </md-content>
</div>
